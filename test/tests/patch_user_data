source tests/test_env
TEST_NAME="API: /users/<user>/data (PATCH)"
TEST_CASE="patch_user_data"
TEST_DESC="Modify user data records"

USER_DATA=$(mktemp)
cat >$USER_DATA <<EOF
{
  "data": [
    {"data_name": "TEST_DATA_NAME_1",
     "data_value": "TEST_DATA_VALUE_ONE",
     "data_desc": "TEST_DATA_DESCRIPTION_ONE",
     "data_proto": "TEST_DATA_PROTO_ONE",
     "data_type": "TEST_DATA_TYPE_ONE"},
    {"data_name": "TEST_DATA_NAME_2",
     "data_value": "TEST_DATA_VALUE_TWO",
     "data_desc": "TEST_DATA_DESCRIPTION_TWO",
     "data_proto": "TEST_DATA_PROTO_TWO",
     "data_type": "TEST_DATA_TYPE_TWO"}]
}
EOF
curl -s -f --show-error\
     -H "Content-type: Application/json"\
     -H "Authorization: Bearer $TKN"\
     -d @$USER_DATA\
     -X PATCH\
     http://$FGAPISERVER_HOST/fgapiserver/$FGAPISERVER_APIVER/users/futuregateway/data
RES=$?
rm -f $USER_DATA
exit $RES
